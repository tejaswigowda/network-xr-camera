<html>
    <head>
        <title>Test</title>
        <script src="jqery-3.5.1.min.js"></script>
    </head>
    <body>
        <video id="video" autoplay></video>
        <canvas id="canvas" style="display:none;"></canvas>
        <script>
        var ws = new WebSocket('ws://localhost:8080/jpgstream_server');
        var video = document.getElementById('video');
        var canvas = document.getElementById('canvas');
        navigator.mediaDevices.getUserMedia({
            video: {
            facingMode: 'environment'
            }
        }).then(function (stream) {
            video.srcObject = stream;
            video.play();
            setInterval(function () {
            var context = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
            var data = canvas.toDataURL('image/png');
            ws.send(data);
            }, 1000 / 30);
        });
        </script>
    </body>
</html>